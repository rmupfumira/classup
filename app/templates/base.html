<!DOCTYPE html>
<html lang="{{ current_language | default('en') }}" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ app_name }}{% endblock %}</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'Noto Sans', 'sans-serif']
                    },
                    colors: {
                        // Ant Design Primary - Daybreak Blue
                        primary: {
                            50: '#e6f4ff',
                            100: '#bae0ff',
                            200: '#91caff',
                            300: '#69b1ff',
                            400: '#4096ff',
                            500: '#1677ff',
                            600: '#0958d9',
                            700: '#003eb3',
                            800: '#002c8c',
                            900: '#001d66'
                        },
                        // Functional colors
                        success: {
                            50: '#f6ffed',
                            100: '#d9f7be',
                            400: '#73d13d',
                            500: '#52c41a',
                            600: '#389e0d',
                            700: '#237804'
                        },
                        warning: {
                            50: '#fffbe6',
                            100: '#fff1b8',
                            400: '#ffc53d',
                            500: '#faad14',
                            600: '#d48806',
                            700: '#ad6800'
                        },
                        error: {
                            50: '#fff2f0',
                            100: '#ffccc7',
                            400: '#ff7875',
                            500: '#ff4d4f',
                            600: '#f5222d',
                            700: '#cf1322'
                        },
                        // Neutral palette
                        neutral: {
                            50: '#fafafa',
                            100: '#f5f5f5',
                            200: '#f0f0f0',
                            300: '#d9d9d9',
                            400: '#bfbfbf',
                            500: '#8c8c8c',
                            600: '#595959',
                            700: '#434343',
                            800: '#262626',
                            900: '#1f1f1f',
                            950: '#141414'
                        }
                    },
                    fontSize: {
                        'xs': ['12px', { lineHeight: '20px' }],
                        'sm': ['14px', { lineHeight: '22px' }],
                        'base': ['14px', { lineHeight: '22px' }],
                        'lg': ['16px', { lineHeight: '24px' }],
                        'xl': ['20px', { lineHeight: '28px' }],
                        '2xl': ['24px', { lineHeight: '32px' }],
                        '3xl': ['30px', { lineHeight: '38px' }],
                        '4xl': ['38px', { lineHeight: '46px' }]
                    },
                    boxShadow: {
                        'card': '0 1px 2px 0 rgba(0, 0, 0, 0.03), 0 1px 6px -1px rgba(0, 0, 0, 0.02), 0 2px 4px 0 rgba(0, 0, 0, 0.02)',
                        'card-hover': '0 1px 2px -2px rgba(0, 0, 0, 0.16), 0 3px 6px 0 rgba(0, 0, 0, 0.12), 0 5px 12px 4px rgba(0, 0, 0, 0.09)',
                        'dropdown': '0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 9px 28px 8px rgba(0, 0, 0, 0.05)',
                        'modal': '0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 9px 28px 8px rgba(0, 0, 0, 0.05)'
                    },
                    borderRadius: {
                        'sm': '4px',
                        'DEFAULT': '6px',
                        'md': '8px',
                        'lg': '8px'
                    }
                }
            }
        }
    </script>

    <!-- Custom Styles -->
    <style>
        /* Ant Design inspired base styles */
        * {
            font-variant-numeric: tabular-nums;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #d9d9d9;
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #bfbfbf;
        }

        /* Form element focus states */
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #1677ff;
            box-shadow: 0 0 0 2px rgba(22, 119, 255, 0.1);
        }

        /* Button transitions */
        button, a {
            transition: all 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);
        }

        /* Table row hover */
        .ant-table-row:hover {
            background-color: #fafafa;
        }

        /* Card hover effect */
        .ant-card:hover {
            box-shadow: 0 1px 2px -2px rgba(0, 0, 0, 0.16), 0 3px 6px 0 rgba(0, 0, 0, 0.12), 0 5px 12px 4px rgba(0, 0, 0, 0.09);
        }
    </style>

    <link rel="stylesheet" href="{{ url_for('static', path='css/app.css') }}">

    {% block head %}{% endblock %}
</head>
<body class="h-full bg-neutral-100 text-neutral-800 antialiased text-sm">
    {% if user %}
        <!-- Authenticated Layout -->
        {% include 'components/_navbar.html' %}

        <div class="flex min-h-[calc(100vh-48px)]">
            <!-- Sidebar (desktop only) -->
            {% include 'components/_sidebar.html' %}

            <!-- Main Content -->
            <main class="flex-1 overflow-y-auto">
                <div class="p-6">
                    <!-- Toast Container -->
                    <div id="toast-container" class="fixed top-16 right-6 z-50 space-y-3"></div>

                    {% block content %}{% endblock %}
                </div>
            </main>
        </div>

        <!-- Mobile Navigation -->
        {% include 'components/_mobile_nav.html' %}
    {% else %}
        <!-- Unauthenticated Layout -->
        <main class="min-h-screen bg-neutral-100">
            {% block auth_content %}{% endblock %}
        </main>
    {% endif %}

    <!-- Global Scripts -->
    <script src="{{ url_for('static', path='js/app.js') }}"></script>

    {% block scripts %}{% endblock %}
</body>
</html>
